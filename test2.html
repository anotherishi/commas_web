<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>// Initialize SpeechRecognition
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'en-US';
        recognition.continuous = true;  // Keep listening continuously
        recognition.interimResults = true; // Show interim results while speaking
        
        // Initialize MediaRecorder
        let mediaRecorder;
        let audioChunks = [];
        
        navigator.mediaDevices.getUserMedia({ audio: true })
          .then(stream => {
            mediaRecorder = new MediaRecorder(stream);
            mediaRecorder.ondataavailable = event => {
              audioChunks.push(event.data);
            };
            mediaRecorder.onstop = () => {
              const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
              const audioURL = URL.createObjectURL(audioBlob);
              const audio = new Audio(audioURL);
              audio.play(); // Play recorded audio after stopping
            };
          })
          .catch(error => {
            console.error("Error accessing microphone: ", error);
          });
        
        // Start recognition
        recognition.start();
        recognition.onresult = (event) => {
          const transcript = Array.from(event.results)
            .map(result => result[0].transcript)
            .join('');
          console.log("Transcript: ", transcript); // Show the transcript
        };
        
        // Start recording
        
        // Stop both after a period or when needed
        setTimeout(() => {
          mediaRecorder.stop();
          recognition.stop();
        }, 10000); // Stop after 10 seconds for example
        </script>
</body>
</html>